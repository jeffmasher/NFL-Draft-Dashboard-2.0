<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NFL Draft Score Dashboard</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
            min-height: 100vh;
            color: #fff;
            padding: 1rem;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        h1 { font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem; }
        .subtitle { color: #cbd5e1; font-size: 0.875rem; margin-bottom: 1.5rem; line-height: 1.5; }
        .grid { display: grid; gap: 1.5rem; margin-bottom: 1.5rem; }
        .grid-2 { grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); }
        .card { background: #334155; border-radius: 0.5rem; padding: 1.5rem; box-shadow: 0 4px 6px rgba(0,0,0,0.3); }
        .card h2 { font-size: 1.25rem; font-weight: 700; margin-bottom: 1rem; }
        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; }
        .stat-box { background: #475569; padding: 0.75rem; border-radius: 0.375rem; text-align: right; }
        .stat-label { font-size: 0.75rem; color: #94a3b8; margin-bottom: 0.25rem; }
        .stat-value { font-size: 1.5rem; font-weight: 700; }
        .stat-year { font-size: 0.75rem; color: #64748b; }
        label { display: block; color: #cbd5e1; font-size: 0.875rem; font-weight: 600; margin-bottom: 0.5rem; }
        select {
            width: 100%;
            background: #475569;
            color: white;
            border: 1px solid #64748b;
            border-radius: 0.375rem;
            padding: 0.5rem 0.75rem;
            font-size: 1rem;
            cursor: pointer;
        }
        select:focus { outline: none; border-color: #3b82f6; }
        .chart-container { width: 100%; height: 300px; margin-top: 1rem; position: relative; }
        table { width: 100%; border-collapse: collapse; font-size: 0.875rem; }
        th, td { padding: 0.5rem; text-align: center; border: 1px solid #475569; }
        th { background: #475569; font-weight: 600; position: sticky; top: 0; }
        tbody tr:hover { background: #3f4f5f; }
        .scroll-container { max-height: 600px; overflow: auto; }
        .heatmap-container { max-height: 1000px; overflow: auto; }
        .heatmap-cell { min-width: 60px; }
        .team-col { position: sticky; left: 0; background: #475569; font-weight: 600; z-index: 5; }
        .bg-red-900 { background-color: #7f1d1d !important; }
        .bg-red-800 { background-color: #991b1b !important; }
        .bg-blue-800 { background-color: #1e3a8a !important; }
        .bg-blue-900 { background-color: #1e293b !important; }
        .text-green-400 { color: #4ade80; }
        .text-red-400 { color: #f87171; }
    </style>
</head>
<body>
    <div class="container">
        <h1>NFL Draft Score Dashboard</h1>
        <p class="subtitle">Visualize draft performance metrics by year and team based on expected Approximate Value per draftee derived from Stathead.com</p>

        <div class="grid grid-2">
            <div class="card">
                <label for="teamSelect">Filter by Team</label>
                <select id="teamSelect">
                    <option value="">All Teams</option>
                </select>
            </div>
        </div>

        <div class="grid grid-2">
            <div class="card">
                <h2 id="teamChartTitle">All Teams - Draft Scores by Year</h2>
                <div class="chart-container">
                    <canvas id="teamChart"></canvas>
                </div>
            </div>
            
            <div class="card">
                <h2>All Teams in Year</h2>
                <label for="yearSelect">Select Year</label>
                <select id="yearSelect">
                    <option value="">Choose a year</option>
                </select>
                <div class="chart-container">
                    <canvas id="yearChart"></canvas>
                </div>
            </div>
        </div>

        <div class="grid">
            <div class="card">
                <div class="card-header">
                    <div>
                        <h2>Best Team by Year</h2>
                        <p style="font-size: 0.875rem; color: #94a3b8;">Top performer</p>
                    </div>
                    <div class="stat-box">
                        <p class="stat-label">Best Overall</p>
                        <p class="stat-value text-green-400" id="bestTeam"></p>
                        <p class="stat-year" id="bestYear"></p>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="bestChart"></canvas>
                </div>
            </div>
        </div>

        <div class="grid">
            <div class="card">
                <div class="card-header">
                    <div>
                        <h2>Worst Team by Year</h2>
                        <p style="font-size: 0.875rem; color: #94a3b8;">Lowest performer</p>
                    </div>
                    <div class="stat-box">
                        <p class="stat-label">Worst Overall</p>
                        <p class="stat-value text-red-400" id="worstTeam"></p>
                        <p class="stat-year" id="worstYear"></p>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="worstChart"></canvas>
                </div>
            </div>
        </div>

        <div class="grid">
            <div class="card">
                <h2>Draft Scores Heatmap</h2>
                <div class="heatmap-container">
                    <table id="heatmapTable"></table>
                </div>
            </div>
        </div>

        <div class="grid">
            <div class="card" style="max-width: 800px;">
                <h2>All Scores by Team and Year</h2>
                <div class="scroll-container">
                    <table id="scoresTable">
                        <thead>
                            <tr>
                                <th>Team</th>
                                <th>Year</th>
                                <th>Score</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-datalabels/2.2.0/chartjs-plugin-datalabels.min.js"></script>
    <script>
        const rawData = `CLE	2000	-3.406644994
LVR	2007	-2.553377638
MIN	2005	-2.495336306
LAR	2006	-2.466790771
NYJ	2014	-2.197440695
LVR	2017	-2.187880243
LVR	2020	-2.043118344
GNB	2001	-2.041479192
DEN	2009	-2.039476175
JAX	2020	-2.038586233
CLE	2005	-1.883786427
JAX	2013	-1.858568876
TAM	2016	-1.851956562
NYG	2012	-1.839523546
TEN	2013	-1.820810319
MIA	2013	-1.764895562
DET	2011	-1.763795702
TAM	2007	-1.75166582
IND	2007	-1.7360912
CLE	2016	-1.726983498
ARI	2002	-1.690381014
LAR	2007	-1.657189015
DET	2004	-1.657060387
ARI	2024	-1.654108096
SFO	2012	-1.591261427
NYG	2021	-1.585689398
WAS	2008	-1.578189416
TEN	2022	-1.541411189
TEN	2003	-1.530288026
NOR	2023	-1.523498531
ARI	2016	-1.501160555
SFO	2013	-1.495621223
CIN	2015	-1.492846165
NYJ	2020	-1.488203636
CIN	2014	-1.478687753
TAM	2005	-1.464008529
NYJ	2003	-1.446912857
DET	2003	-1.416766016
LVR	2023	-1.412661573
NYG	2011	-1.400978253
LAC	2014	-1.385128684
MIN	2001	-1.36764358
IND	2013	-1.36205567
BUF	2004	-1.357486372
CAR	2023	-1.349566785
PHI	2014	-1.341544265
DET	2005	-1.3205018
NOR	2003	-1.315003795
BUF	2010	-1.304735968
NYG	2022	-1.290141269
BUF	2008	-1.271919576
DAL	2009	-1.267180899
LVR	2016	-1.264049663
ARI	2006	-1.260577745
DET	2006	-1.255683886
NWE	2019	-1.254712627
DEN	2013	-1.251596432
TEN	2021	-1.250768833
HOU	2014	-1.237195721
LVR	2001	-1.236960741
ATL	2012	-1.226031495
HOU	2005	-1.222986242
TAM	2010	-1.206786586
NWE	2006	-1.188370885
SEA	2002	-1.182061541
CLE	2005	-1.178579234
WAS	2023	-1.17622321
KAN	2010	-1.172109637
ARI	2014	-1.149407682
ATL	2024	-1.125914642
JAX	2015	-1.11979778
PHI	2003	-1.117193369
WAS	2000	-1.108003139
LAR	2020	-1.107810929
DAL	2001	-1.093676753
TAM	2011	-1.09143685
MIN	2004	-1.086478069
CIN	2017	-1.077412954
NYJ	2021	-1.073849365
CLE	2018	-1.071302013
CLE	2012	-1.055981998
TEN	2015	-1.024047335
JAX	2008	-1.01831076
PHI	2004	-1.016243013
SFO	2016	-1.009150754
CLE	2013	-1.008637687
DEN	2003	-1.001751294
BUF	2000	-0.997002699
ARI	2005	-0.994256351
HOU	2002	-0.988743792
DAL	2006	-0.988443278
MIA	2008	-0.977404159
LVR	2005	-0.97196708
CHI	2001	-0.963941328
NYJ	2017	-0.961176218
DEN	2020	-0.958524504
CLE	2015	-0.956967626
NYG	2016	-0.948104252
JAX	2012	-0.947380103
DET	2024	-0.945019526
TAM	2004	-0.940886968
PIT	2018	-0.940753312
LAC	2003	-0.940627002
PHI	2001	-0.927331733
CIN	2000	-0.923473421
DAL	2000	-0.922396814
NOR	2015	-0.918755584
WAS	2022	-0.899689065
CLE	2022	-0.890358657
LAR	2009	-0.887466527
CHI	2015	-0.879246874
SFO	2008	-0.878235851
MIA	2006	-0.870931392
SEA	2018	-0.863895136
CAR	2021	-0.863278805
KAN	2018	-0.86298345
WAS	2018	-0.856743411
MIN	2016	-0.852137263
GNB	2015	-0.851278083
NYG	2008	-0.848924085
SEA	2017	-0.847905215
NYG	2002	-0.841843944
NYJ	2010	-0.836830558
ATL	2009	-0.836622271
LAC	2008	-0.835187205
LVR	2025	-0.834634024
JAX	2010	-0.833115477
DET	2008	-0.832483853
CIN	2008	-0.823727193
LVR	2010	-0.819716098
LAC	2012	-0.805749511
LVR	2018	-0.800580673
SFO	2000	-0.797038773
LVR	2004	-0.794401283
IND	2019	-0.792117494
MIA	2020	-0.791321244
PIT	2008	-0.789682842
WAS	2001	-0.788089313
BAL	2012	-0.76290638
CLE	2001	-0.761479586
HOU	2022	-0.75213669
NOR	2018	-0.75164619
CAR	2022	-0.74860258
NYG	2009	-0.746387145
WAS	2016	-0.74574224
ARI	2025	-0.735908759
DAL	2012	-0.73311799
DEN	2007	-0.730967567
JAX	2011	-0.727577108
DET	2017	-0.723487813
LAR	2002	-0.722939033
NYG	2023	-0.714655422
CLE	2009	-0.710034367
BUF	2016	-0.705143065
LAR	2011	-0.703931888
ATL	2006	-0.703367367
ARI	2007	-0.70297475
SFO	2025	-0.6957189
ATL	2020	-0.692160384
WAS	2002	-0.690329011
NYJ	2024	-0.683669633
MIN	2022	-0.682890361
TEN	2023	-0.679993391
NOR	2005	-0.673864483
BUF	2005	-0.672861769
DAL	2023	-0.671992918
WAS	2004	-0.67034629
WAS	2011	-0.669310183
LAC	2021	-0.667870262
KAN	2001	-0.667598016
NYJ	2008	-0.655668119
DEN	2004	-0.65453349
LAR	2013	-0.631501744
BAL	2021	-0.626247891
BUF	2014	-0.624942733
CLE	2006	-0.624892093
BAL	2004	-0.617631876
DET	2002	-0.616547517
TEN	2017	-0.616172225
DET	2020	-0.615535305
CLE	2004	-0.610785254
LAR	2010	-0.60658872
PHI	2019	-0.596453866
NWE	2007	-0.595022018
SFO	2014	-0.591886065
NWE	2018	-0.576195906
NOR	2002	-0.575724612
DEN	2015	-0.574374004
PHI	2006	-0.574262093
CAR	2009	-0.572276878
CAR	2003	-0.550730495
LAR	2001	-0.550562315
HOU	2015	-0.541605967
TEN	2011	-0.536632115
DEN	2018	-0.532049448
CIN	2018	-0.530827025
TEN	2004	-0.528737615
HOU	2007	-0.524725591
ATL	2017	-0.517838901
GNB	2018	-0.512615256
CLE	2023	-0.511582439
LAR	2008	-0.503703964
IND	2005	-0.497869806
KAN	2023	-0.493248858
HOU	2019	-0.483394827
HOU	2018	-0.481797714
LVR	2006	-0.475424661
MIA	2022	-0.47434167
SEA	2013	-0.474278901
NYG	2001	-0.472852493
NWE	2024	-0.469098329
CAR	2019	-0.466877053
BUF	2011	-0.464409629
LVR	2003	-0.458028428
TEN	2010	-0.457678803
PHI	2023	-0.45634108
ARI	2020	-0.454234226
LVR	2011	-0.453064431
ATL	2002	-0.452560455
LAC	2016	-0.449105143
KAN	2012	-0.443123409
WAS	2017	-0.439522415
MIA	2021	-0.431112537
BAL	2010	-0.428052437
CLE	2021	-0.427112262
NOR	2022	-0.424684156
NOR	2001	-0.419200405
KAN	2009	-0.417726634
IND	2011	-0.416538825
CAR	2010	-0.412760143
NYJ	2023	-0.405638001
JAX	2004	-0.399017766
JAX	2022	-0.398456135
CIN	2016	-0.398400403
CLE	2011	-0.394604052
CHI	2022	-0.392302276
TEN	2020	-0.390575045
DAL	2025	-0.389296715
ATL	2010	-0.386849812
PIT	2019	-0.38033951
SEA	2014	-0.37842184
TAM	2017	-0.378409491
DET	2000	-0.377974613
NYJ	2015	-0.37706384
IND	2014	-0.37542159
KAN	2002	-0.375008825
PIT	2025	-0.367235524
ATL	2000	-0.353649237
JAX	2017	-0.350499229
MIN	2024	-0.350122217
TAM	2003	-0.34659783
ARI	2010	-0.345423649
MIN	2010	-0.340942721
LVR	2015	-0.339994424
CHI	2011	-0.339352915
PHI	2010	-0.338592397
NOR	2004	-0.330449891
CAR	2016	-0.323724274
IND	2012	-0.317513971
ARI	2018	-0.313474017
CIN	2024	-0.309501227
BAL	2024	-0.306877666
NWE	2008	-0.298935707
LAC	2002	-0.293837073
MIN	2019	-0.280701556
PHI	2022	-0.270951535
CIN	2019	-0.267946967
HOU	2010	-0.255656125
SEA	2019	-0.255396728
CHI	2017	-0.253937912
KAN	2025	-0.251213193
ARI	2022	-0.250427011
LAR	2025	-0.250390207
TAM	2001	-0.247121615
TEN	2001	-0.246530166
PIT	2006	-0.24030287
SEA	2009	-0.236874631
CLE	2014	-0.22724303
JAX	2025	-0.226033848
MIN	2011	-0.22446758
SEA	2025	-0.222915694
CAR	2018	-0.21774489
LAR	2012	-0.216684954
MIN	2021	-0.214746457
LAC	2010	-0.213839487
BUF	2002	-0.21315054
DAL	2015	-0.210003789
BAL	2016	-0.204510397
WAS	2007	-0.203740172
KAN	2000	-0.203180163
TEN	2018	-0.199077278
HOU	2016	-0.197290197
CHI	2004	-0.195113474
LVR	2009	-0.192513531
SEA	2021	-0.189505699
NYG	2006	-0.186626853
NWE	2004	-0.185977021
SEA	2006	-0.185164252
GNB	2019	-0.184713608
NWE	2022	-0.183109914
CIN	2013	-0.180658152
DET	2007	-0.179944741
PHI	2007	-0.174872667
CLE	2024	-0.174227679
DEN	2001	-0.172462136
ATL	2013	-0.169433988
WAS	2003	-0.165145627
LVR	2012	-0.164660849
IND	2023	-0.161593507
HOU	2004	-0.159136941
CHI	2012	-0.158844463
LVR	2019	-0.157336985
MIA	2024	-0.150629692
MIN	2025	-0.141167205
KAN	2003	-0.140821565
DEN	2019	-0.139542809
CIN	2021	-0.137892398
KAN	2007	-0.137826268
LAC	2000	-0.13173144
MIN	2023	-0.119559278
MIA	2005	-0.110507963
ATL	2003	-0.109691603
WAS	2021	-0.106953687
SEA	2004	-0.106633467
SFO	2002	-0.105166204
LAR	2000	-0.103799684
DET	2018	-0.100985563
WAS	2013	-0.099337309
LVR	2008	-0.098373124
MIN	2002	-0.097099445
PHI	2025	-0.096733151
SFO	2009	-0.094331299
NYG	2020	-0.091998468
CIN	2002	-0.091965146
LVR	2021	-0.091167237
DET	2019	-0.090791168
CHI	2006	-0.08974497
DEN	2023	-0.088960979
LVR	2013	-0.088216973
CLE	2019	-0.086254596
PHI	2017	-0.086124845
ATL	2022	-0.083729363
ATL	2021	-0.076258896
ARI	2017	-0.073892746
TAM	2006	-0.071811648
HOU	2020	-0.068154672
TAM	2009	-0.067020802
LAC	2009	-0.066098135
NYJ	2018	-0.065277214
LAC	2011	-0.065041035
ARI	2023	-0.060822307
LAR	2003	-0.060342291
TEN	2012	-0.059609357
BAL	2005	-0.047540017
JAX	2018	-0.041915293
PIT	2014	-0.036265054
ATL	2019	-0.029561597
ARI	2021	-0.026596949
PHI	2000	-0.013863524
CAR	2020	0.001457564
TAM	2000	0.002213236
LVR	2022	0.00856162
TEN	2006	0.01267075
GNB	2024	0.014631917
NWE	2011	0.015677181
CIN	2022	0.021049008
MIN	2006	0.02239977
PIT	2016	0.029312162
CHI	2024	0.034016528
NYJ	2016	0.035662306
CAR	2011	0.039210989
ARI	2012	0.041656447
BUF	2013	0.05386969
CHI	2005	0.054024237
BUF	2006	0.056167255
LAC	2019	0.057937963
WAS	2009	0.059566737
JAX	2021	0.067243643
ARI	2009	0.071831863
SEA	2003	0.084648732
WAS	2005	0.085668393
LVR	2024	0.088542528
SEA	2020	0.098509375
ARI	2019	0.099836017
CIN	2003	0.101025183
MIN	2012	0.103911261
IND	2015	0.106065177
SFO	2003	0.107898529
JAX	2001	0.108410404
MIA	2001	0.110841917
NYG	2015	0.1132426
SFO	2017	0.116571878
DAL	2013	0.118187403
SEA	2008	0.119950414
CHI	2019	0.120792903
PIT	2021	0.124213409
CHI	2010	0.124374677
CHI	2014	0.128222869
BUF	2015	0.140523742
ATL	2007	0.143509646
BUF	2025	0.148026856
DET	2022	0.148607271
NYJ	2019	0.150483398
MIA	2004	0.150851868
GNB	2007	0.165849127
PIT	2015	0.171081939
NYG	2018	0.172113162
MIA	2017	0.179933672
NYJ	2022	0.180239932
BAL	2014	0.184758758
CAR	2024	0.19143693
PIT	2022	0.194749353
MIA	2003	0.201420877
LAC	2022	0.206003064
NOR	2020	0.206504869
DEN	2017	0.206775246
GNB	2012	0.210356972
NYG	2017	0.212794915
NYG	2007	0.225326527
KAN	2020	0.228662171
CLE	2020	0.229201384
TAM	2013	0.231657108
NWE	2017	0.234861255
CLE	2002	0.237041318
DET	2012	0.237347874
SEA	2000	0.237869143
NOR	2007	0.24345465
HOU	2017	0.24379281
KAN	2019	0.245575349
ATL	2015	0.246897003
DAL	2017	0.249707592
SFO	2010	0.255343872
NYJ	2006	0.255964359
MIN	2017	0.264266359
MIA	2000	0.265684961
CLE	2010	0.266295784
SFO	2011	0.269162343
ARI	2000	0.270973856
CLE	2017	0.271192513
PIT	2012	0.273356858
BUF	2009	0.277288312
NOR	2021	0.277775176
LVR	2002	0.282550679
TAM	2002	0.285121719
IND	2004	0.29096618
IND	2016	0.291222064
MIN	2013	0.292857342
ARI	2011	0.292929829
DEN	2025	0.294312947
PIT	2001	0.296775946
TEN	2025	0.297448336
SFO	2023	0.301504864
DET	2010	0.303143878
NYJ	2009	0.303220566
DAL	2010	0.303728637
TAM	2014	0.305507378
IND	2017	0.305629535
HOU	2003	0.310799558
JAX	2005	0.315929473
CLE	2003	0.31639205
PHI	2005	0.3226382
NOR	2008	0.325546872
TAM	2018	0.328261791
MIA	2011	0.331509057
GNB	2016	0.332294098
DAL	2024	0.337267702
PIT	2005	0.341335356
SFO	2021	0.341847869
LAR	2004	0.346417717
GNB	2023	0.348725699
CHI	2008	0.349223559
ATL	2018	0.369372795
WAS	2006	0.373329215
BAL	2022	0.378052576
NOR	2024	0.378937848
MIN	2018	0.383302662
MIN	2000	0.38733111
TEN	2024	0.388136393
GNB	2025	0.388525435
BAL	2001	0.390821807
HOU	2006	0.393639514
MIA	2009	0.393677542
CIN	2007	0.396468495
CAR	2014	0.400673411
PHI	2015	0.402886409
NYG	2019	0.406175648
BAL	2019	0.407382885
IND	2009	0.408304432
NYJ	2011	0.412077553
KAN	2004	0.417280508
LAC	2018	0.419986658
CAR	2004	0.420266692
CHI	2009	0.428885438
PIT	2023	0.43308156
NYJ	2013	0.434889703
NYG	2014	0.438849822
CLE	2007	0.442596421
NYJ	2025	0.445414869
SEA	2024	0.445903658
MIA	2018	0.44635778
MIA	2002	0.447088751
LAC	2024	0.44902165
KAN	2024	0.461321438
DEN	2005	0.466696107
LAR	2014	0.467699757
DEN	2014	0.470155393
BUF	2020	0.476268073
CHI	2023	0.476292133
BUF	2024	0.476384809
IND	2010	0.476850254
IND	2025	0.485864694
SEA	2016	0.489554862
CHI	2002	0.491432502
DET	2025	0.493495626
CIN	2004	0.494867931
MIA	2014	0.495017315
SFO	2001	0.502731618
CAR	2006	0.503306123
PIT	2020	0.509343621
WAS	2024	0.514258964
TEN	2007	0.521221948
SFO	2004	0.521878286
WAS	2020	0.523183794
MIA	2015	0.525638505
DEN	2022	0.529377436
BAL	2017	0.531434197
CHI	2018	0.532090498
LAR	2018	0.535954265
NWE	2021	0.540710308
NOR	2012	0.544212447
PHI	2011	0.553238581
MIA	2016	0.555796581
SFO	2015	0.557102726
TEN	2000	0.559963501
CHI	2013	0.563061176
JAX	2016	0.567562226
CAR	2008	0.571909605
ATL	2023	0.576695726
SEA	2005	0.577152358
NWE	2020	0.581185292
JAX	2003	0.581359175
IND	2021	0.585035304
CAR	2000	0.587816912
DAL	2018	0.58868394
GNB	2002	0.588715448
GNB	2004	0.599257312
LAR	2016	0.600457264
LAR	2015	0.60547224
NYG	2013	0.615113443
NWE	2023	0.618656434
ATL	2025	0.62111588
TAM	2021	0.62138902
CIN	2012	0.628267396
MIA	2019	0.630904145
IND	2000	0.636479668
DAL	2002	0.63949018
DAL	2021	0.643292964
BAL	2025	0.647144064
LAC	2017	0.649693346
CAR	2012	0.654256221
GNB	2011	0.66007543
NWE	2001	0.662324263
GNB	2017	0.663183425
BAL	2009	0.664186291
KAN	2014	0.665265515
SEA	2023	0.668316845
LAR	2021	0.669060587
MIN	2014	0.6718748
CAR	2015	0.677068486
NOR	2010	0.687348123
NYJ	2005	0.691686314
PIT	2024	0.692823291
BUF	2012	0.695218877
LAR	2019	0.699546909
BAL	2011	0.7032366
IND	2022	0.707262381
NWE	2014	0.711012097
NYJ	2012	0.715841979
NWE	2013	0.717687978
CAR	2025	0.717900738
MIA	2023	0.725824002
NOR	2014	0.727129283
MIA	2007	0.72920841
ATL	2014	0.72973997
CHI	2021	0.729962331
JAX	2009	0.734406548
JAX	2023	0.737674326
KAN	2006	0.745404691
BAL	2000	0.747145248
TEN	2014	0.750475121
JAX	2024	0.751485622
NYG	2000	0.761442827
ARI	2013	0.762541475
TEN	2008	0.768104177
PIT	2013	0.769796137
BUF	2023	0.77126027
TAM	2023	0.775303951
NYG	2025	0.778739929
LAC	2015	0.779111775
DEN	2008	0.790281294
PHI	2020	0.797220356
BUF	2019	0.806318253
NWE	2002	0.806913864
DEN	2002	0.808637756
TEN	2005	0.83667252
JAX	2019	0.840664785
HOU	2024	0.843113984
IND	2002	0.857922835
SFO	2024	0.85826981
LVR	2000	0.862177278
JAX	2006	0.863393282
TEN	2002	0.864640483
ARI	2015	0.864697599
BUF	2007	0.869095645
SEA	2001	0.872710326
TAM	2020	0.873415423
SFO	2020	0.877233334
DAL	2004	0.881681734
KAN	2005	0.889020521
BAL	2015	0.900348828
GNB	2003	0.906086494
DAL	2008	0.906346585
DEN	2012	0.91693774
CLE	2025	0.917680907
SEA	2007	0.919538327
CIN	2020	0.934255083
WAS	2019	0.936718754
DEN	2011	0.94189725
SFO	2006	0.945058184
TAM	2019	0.945851631
SFO	2018	0.951366581
DEN	2016	0.955895129
CLE	2008	0.95688895
MIA	2010	0.957250558
MIA	2025	0.957273276
JAX	2014	0.963880719
GNB	2020	0.978500174
GNB	2006	0.984630484
CIN	2023	0.985775868
NWE	2009	1.001594136
BUF	2021	1.008557076
HOU	2025	1.014136857
CIN	2025	1.014708495
PIT	2000	1.021093988
HOU	2011	1.037323138
LAC	2006	1.045485586
HOU	2008	1.045829921
MIN	2009	1.053950951
DET	2014	1.05794694
PHI	2016	1.063289383
KAN	2011	1.087275018
NYJ	2004	1.101652969
NOR	2016	1.101927694
NOR	2000	1.106178467
KAN	2013	1.108923595
IND	2018	1.11439502
CHI	2020	1.116124988
NOR	2019	1.116483946
CAR	2013	1.126170287
NWE	2012	1.159075188
NYJ	2002	1.172555358
SFO	2022	1.176418218
LAC	2007	1.178269979
NWE	2015	1.185777036
WAS	2014	1.188112916
DAL	2022	1.195099491
ARI	2001	1.198916334
GNB	2021	1.203585105
DET	2015	1.206933673
LAC	2025	1.212202114
PHI	2021	1.220005745
ATL	2016	1.224826633
CIN	2010	1.227820744
CHI	2025	1.231734023
HOU	2021	1.232348056
MIN	2008	1.238381502
LAC	2013	1.238848639
DEN	2000	1.245187428
LAC	2020	1.260912194
LAC	2023	1.28280929
KAN	2008	1.282936596
CHI	2007	1.283657331
CHI	2016	1.286158005
WAS	2015	1.288690608
TAM	2022	1.289572609
CAR	2017	1.299481173
NOR	2009	1.311690387
TEN	2009	1.324497162
WAS	2012	1.335085259
DEN	2024	1.335317209
KAN	2022	1.346392034
TAM	2025	1.363581237
ATL	2011	1.385314161
IND	2003	1.387714706
DET	2016	1.406510428
JAX	2007	1.420268677
SEA	2022	1.423695957
LAR	2022	1.42738928
TEN	2016	1.433249084
NYG	2024	1.437918839
DET	2023	1.443366813
BAL	2008	1.460149922
CHI	2003	1.461481045
DAL	2019	1.492821339
NWE	2003	1.494257037
DEN	2010	1.504583685
TAM	2015	1.510266124
DAL	2011	1.528139986
NYJ	2000	1.534969997
PIT	2011	1.535144263
DET	2001	1.540631448
BAL	2023	1.540996641
PIT	2003	1.541685677
WAS	2010	1.546637057
BUF	2003	1.553178723
TAM	2024	1.553391732
GNB	2010	1.554011572
WAS	2025	1.557679501
LAR	2017	1.561102736
CAR	2001	1.568396691
DET	2013	1.578880829
SFO	2019	1.589959935
MIN	2003	1.602600341
PIT	2009	1.608009318
NYG	2005	1.614474979
TAM	2012	1.637110788
LAR	2005	1.638605713
MIN	2007	1.644369104
NOR	2025	1.651632023
HOU	2023	1.657782154
DAL	2020	1.66634751
CAR	2007	1.669491937
HOU	2012	1.672199744
PHI	2018	1.67662908
PHI	2012	1.681629879
BUF	2001	1.693608627
IND	2024	1.702802768
BAL	2007	1.717566254
NYG	2010	1.729582564
BUF	2017	1.734177975
TAM	2008	1.735715735
JAX	2002	1.738314783
NOR	2011	1.740667319
IND	2008	1.745670675
MIN	2020	1.745694091
PHI	2008	1.755937909
PIT	2007	1.817255558
NYJ	2001	1.826295821
ATL	2001	1.840107249
IND	2006	1.840903095
CHI	2000	1.859639619
NYG	2003	1.861625594
LAC	2005	1.870759968
PHI	2024	1.900613024
NWE	2010	1.912762896
JAX	2000	1.924020266
IND	2020	1.943917794
ARI	2003	1.946897739
BAL	2006	1.957243019
DAL	2007	1.965143535
CIN	2009	2.027446604
GNB	2008	2.031821522
PIT	2017	2.059154725
MIA	2012	2.060509404
ATL	2004	2.067077478
BAL	2002	2.080569153
HOU	2009	2.106486927
BAL	2020	2.13157695
HOU	2013	2.166958429
ATL	2005	2.196268833
BAL	2003	2.198123032
BAL	2013	2.248175444
GNB	2022	2.254119124
SEA	2015	2.276015569
SFO	2005	2.317849538
LAR	2024	2.317918117
NOR	2013	2.332044395
KAN	2017	2.353995962
BUF	2022	2.360780773
DEN	2021	2.378943881
NWE	2025	2.384214368
CAR	2002	2.396556368
GNB	2014	2.400361546
SEA	2010	2.411031265
GNB	2009	2.42508454
NYJ	2007	2.431880513
KAN	2016	2.460048539
GNB	2000	2.462871469
KAN	2015	2.47204336
IND	2001	2.525048959
PIT	2004	2.543733496
DET	2009	2.554329886
DAL	2003	2.564293371
PHI	2009	2.590029724
GNB	2013	2.603567388
CIN	2011	2.620168374
PHI	2013	2.627992862
CAR	2005	2.652884821
CIN	2001	2.789295212
KAN	2021	2.809383201
DET	2021	2.83797053
NWE	2005	2.84346994
ARI	2008	2.899963482
DEN	2006	2.949555223
NWE	2016	2.959128149
DAL	2016	3.008833658
DAL	2014	3.061564293
PIT	2010	3.138917125
BUF	2018	3.183769159
NOR	2017	3.192618458
PHI	2002	3.331268418
PIT	2002	3.346641211
TEN	2019	3.367179994
SEA	2011	3.414948039
ATL	2008	3.41848154
DAL	2005	3.451073285
CIN	2006	3.466576404
LAR	2023	3.475005641
MIN	2015	3.509241799
SFO	2007	3.535201869
GNB	2005	3.549472999
NYG	2004	4.00094826
LAC	2004	4.101317093
BAL	2018	4.266799466
ARI	2004	4.386404937
LAC	2001	4.695672127
LVR	2014	4.710633965
NWE	2000	4.881012578
NOR	2006	5.221815167
SEA	2012	6.000899299`;

        // Parse data
        const data = rawData.split('\n').filter(l => l.trim()).map(line => {
            const [team, year, score] = line.split('\t');
            return { team, year: parseInt(year), score: parseFloat(score) };
        });

        const teams = [...new Set(data.map(d => d.team))].sort();
        const years = [...new Set(data.map(d => d.year))].sort((a,b) => a-b);
        
        const bestTeam = data.reduce((best, curr) => curr.score > best.score ? curr : best);
        const worstTeam = data.reduce((worst, curr) => curr.score < worst.score ? curr : worst);

        document.getElementById('bestTeam').textContent = bestTeam.team;
        document.getElementById('bestYear').textContent = bestTeam.year;
        document.getElementById('worstTeam').textContent = worstTeam.team;
        document.getElementById('worstYear').textContent = worstTeam.year;

        // Populate team select
        const teamSelect = document.getElementById('teamSelect');
        teams.forEach(team => {
            const opt = document.createElement('option');
            opt.value = team;
            opt.textContent = team;
            teamSelect.appendChild(opt);
        });

        // Populate year select
        const yearSelect = document.getElementById('yearSelect');
        years.forEach(year => {
            const opt = document.createElement('option');
            opt.value = year;
            opt.textContent = year;
            yearSelect.appendChild(opt);
        });

        // Year data aggregation
        const yearData = years.map(year => {
            const items = data.filter(d => d.year === year);
            const maxScore = Math.max(...items.map(i => i.score));
            const minScore = Math.min(...items.map(i => i.score));
            return {
                year,
                max: maxScore,
                min: minScore,
                bestTeam: items.find(i => i.score === maxScore).team,
                worstTeam: items.find(i => i.score === minScore).team
            };
        });

        let yearChart, teamChart, bestChart, worstChart;

        function updateCharts() {
            const selectedTeam = teamSelect.value;
            
            // Update team chart title
            document.getElementById('teamChartTitle').textContent = 
                selectedTeam ? `${selectedTeam} - Draft Scores` : 'All Teams - Draft Scores by Year';
            
            // Team chart
            const teamData = selectedTeam 
                ? data.filter(d => d.team === selectedTeam).sort((a,b) => a.year - b.year)
                : yearData;
            
            if (teamChart) teamChart.destroy();
            teamChart = new Chart(document.getElementById('teamChart'), {
                type: 'bar',
                data: {
                    labels: teamData.map(d => d.year),
                    datasets: [{
                        label: 'Score',
                        data: teamData.map(d => selectedTeam ? d.score : d.max),
                        backgroundColor: '#3b82f6'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: { ticks: { color: '#94a3b8' }, grid: { color: '#475569' } },
                        x: { ticks: { color: '#94a3b8' }, grid: { color: '#475569' } }
                    }
                }
            });

            updateScoresTable(selectedTeam);
        }

        function updateYearChart() {
            const selectedYear = yearSelect.value;
            if (!selectedYear) {
                if (yearChart) {
                    yearChart.destroy();
                    yearChart = null;
                }
                return;
            }

            const yearDataFiltered = data.filter(d => d.year === parseInt(selectedYear))
                .sort((a,b) => b.score - a.score);

            if (yearChart) yearChart.destroy();
            yearChart = new Chart(document.getElementById('yearChart'), {
                type: 'bar',
                data: {
                    labels: yearDataFiltered.map(d => d.team),
                    datasets: [{
                        label: 'Score',
                        data: yearDataFiltered.map(d => d.score),
                        backgroundColor: '#8b5cf6'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    plugins: { legend: { display: false } },
                    scales: {
                        x: { ticks: { color: '#94a3b8' }, grid: { color: '#475569' } },
                        y: { ticks: { color: '#94a3b8', font: { size: 10 } }, grid: { color: '#475569' } }
                    }
                }
            });
        }

        // Best team chart
        bestChart = new Chart(document.getElementById('bestChart'), {
            type: 'bar',
            data: {
                labels: yearData.map(d => d.year),
                datasets: [{
                    label: 'Best Score',
                    data: yearData.map(d => d.max),
                    backgroundColor: '#10b981'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { 
                    legend: { display: false },
                    tooltip: {
                        callbacks: {
                            title: (items) => {
                                const idx = items[0].dataIndex;
                                return `Year: ${yearData[idx].year}, Team: ${yearData[idx].bestTeam}`;
                            }
                        }
                    },
                    datalabels: {
                        anchor: 'end',
                        align: 'top',
                        color: '#fff',
                        font: { size: 10, weight: 'bold' },
                        formatter: (value, context) => {
                            return yearData[context.dataIndex].bestTeam;
                        }
                    }
                },
                scales: {
                    y: { ticks: { color: '#94a3b8' }, grid: { color: '#475569' } },
                    x: { ticks: { color: '#94a3b8' }, grid: { color: '#475569' } }
                }
            }
        });

        // Worst team chart
        worstChart = new Chart(document.getElementById('worstChart'), {
            type: 'bar',
            data: {
                labels: yearData.map(d => d.year),
                datasets: [{
                    label: 'Worst Score',
                    data: yearData.map(d => d.min),
                    backgroundColor: '#ef4444'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { 
                    legend: { display: false },
                    tooltip: {
                        callbacks: {
                            title: (items) => {
                                const idx = items[0].dataIndex;
                                return `Year: ${yearData[idx].year}, Team: ${yearData[idx].worstTeam}`;
                            }
                        }
                    }
                },
                scales: {
                    y: { ticks: { color: '#94a3b8' }, grid: { color: '#475569' } },
                    x: { ticks: { color: '#94a3b8' }, grid: { color: '#475569' } }
                }
            }
        });

        function updateScoresTable(selectedTeam) {
            const tbody = document.querySelector('#scoresTable tbody');
            tbody.innerHTML = '';
            const filteredData = selectedTeam 
                ? data.filter(d => d.team === selectedTeam)
                : data;
            filteredData.sort((a,b) => b.score - a.score).forEach(item => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${item.team}</td>
                    <td>${item.year}</td>
                    <td>${item.score.toFixed(2)}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        function createHeatmap() {
            const table = document.getElementById('heatmapTable');
            let html = '<thead><tr><th class="team-col">Team</th>';
            years.forEach(year => {
                html += `<th class="heatmap-cell">${year}</th>`;
            });
            html += '</tr></thead><tbody>';
            
            teams.forEach(team => {
                html += `<tr><td class="team-col">${team}</td>`;
                years.forEach(year => {
                    const item = data.find(d => d.team === team && d.year === year);
                    const score = item ? item.score : null;
                    let bgClass = '';
                    if (score !== null) {
                        if (score >= 2) bgClass = 'bg-red-900';
                        else if (score >= 1) bgClass = 'bg-red-800';
                        else if (score >= 0) bgClass = '';
                        else if (score >= -1) bgClass = 'bg-blue-800';
                        else bgClass = 'bg-blue-900';
                    }
                    html += `<td class="heatmap-cell ${bgClass}">${score !== null ? score.toFixed(1) : '-'}</td>`;
                });
                html += '</tr>';
            });
            html += '</tbody>';
            table.innerHTML = html;
        }

        teamSelect.addEventListener('change', updateCharts);
        yearSelect.addEventListener('change', updateYearChart);

        updateCharts();
        createHeatmap();
    </script>
</body>
</html>